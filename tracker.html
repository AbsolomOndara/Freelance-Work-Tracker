
<script>
    // Add this to the beginning of your tracker.html file, right after the opening <script> tag

// Authentication and Session Management
class AuthManager {
    constructor() {
        this.currentUser = null;
        this.init();
    }

    init() {
        this.checkAuthStatus();
        this.setupLogoutHandler();
    }

    checkAuthStatus() {
        // Check for active session
        const sessionData = localStorage.getItem('freelanceSession') || 
                           sessionStorage.getItem('freelanceSession');
        
        if (!sessionData) {
            // No active session, redirect to login
            this.redirectToLogin();
            return false;
        }

        try {
            const session = JSON.parse(sessionData);
            this.currentUser = session.user;
            
            // Verify session validity (optional: add expiration check)
            const loginTime = new Date(session.loginTime);
            const now = new Date();
            const timeDiff = now.getTime() - loginTime.getTime();
            const hoursDiff = timeDiff / (1000 * 3600);
            
            // If session is older than 24 hours and not "remember me", require re-login
            if (hoursDiff > 24 && !session.rememberMe) {
                this.logout();
                return false;
            }
            
            // Update user display
            this.updateUserDisplay();
            return true;
            
        } catch (error) {
            console.error('Invalid session data:', error);
            this.logout();
            return false;
        }
    }

    updateUserDisplay() {
        if (!this.currentUser) return;
        
        // Update header with user information
        const header = document.querySelector('header') || document.querySelector('.header');
        if (header) {
            // Create or update user menu
            let userMenu = document.getElementById('userMenu');
            if (!userMenu) {
                userMenu = document.createElement('div');
                userMenu.id = 'userMenu';
                userMenu.className = 'user-menu';
                userMenu.innerHTML = `
                    <div class="user-avatar">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="user-info">
                        <div class="user-name">${this.currentUser.firstName} ${this.currentUser.lastName}</div>
                        <div class="user-email">${this.currentUser.email}</div>
                    </div>
                    <div class="user-actions">
                        <button class="btn-logout" id="logoutBtn">
                            <i class="fas fa-sign-out-alt"></i>
                            Logout
                        </button>
                    </div>
                `;
                header.appendChild(userMenu);
            }
        }
        
        // Add welcome message
        this.showWelcomeMessage();
    }

    showWelcomeMessage() {
        // Create a welcome notification
        const notification = document.createElement('div');
        notification.className = 'welcome-notification';
        notification.innerHTML = `
            <div class="welcome-content">
                <i class="fas fa-user-check"></i>
                <span>Welcome back, ${this.currentUser.firstName}!</span>
            </div>
        `;
        
        // Style the notification
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.style.transform = 'translateX(0)';
        }, 100);
        
        setTimeout(() => {
            notification.style.transform = 'translateX(100%)';
            setTimeout(() => {
                if (document.body.contains(notification)) {
                    document.body.removeChild(notification);
                }
            }, 300);
        }, 3000);
    }

    setupLogoutHandler() {
        document.addEventListener('click', (e) => {
            if (e.target.closest('#logoutBtn')) {
                this.logout();
            }
        });
    }

    logout() {
        // Clear session data
        localStorage.removeItem('freelanceSession');
        sessionStorage.removeItem('freelanceSession');
        
        // Show logout notification
        this.showLogoutNotification();
        
        // Redirect to home page
        setTimeout(() => {
            window.location.href = 'index.html';
        }, 1500);
    }

    showLogoutNotification() {
        const notification = document.createElement('div');
        notification.className = 'logout-notification';
        notification.innerHTML = `
            <div class="logout-content">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logged out successfully. Redirecting...</span>
            </div>
        `;
        
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            notification.style.transform = 'translateX(0)';
        }, 100);
    }

    redirectToLogin() {
        // Show redirect notification
        const notification = document.createElement('div');
        notification.innerHTML = `
            <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fas fa-exclamation-triangle"></i>
                <span>Please log in to access the tracker</span>
            </div>
        `;
        
        notification.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            font-weight: 600;
        `;
        
        document.body.appendChild(notification);
        
        setTimeout(() => {
            window.location.href = 'login.html';
        }, 2000);
    }

    getCurrentUser() {
        return this.currentUser;
    }
}

// User Data Manager - Separate user data by account
class UserDataManager {
    constructor(userId) {
        this.userId = userId;
        this.userPrefix = `freelance_user_${userId}_`;
    }

    // Override localStorage methods to be user-specific
    getItem(key) {
        return localStorage.getItem(this.userPrefix + key);
    }

    setItem(key, value) {
        localStorage.setItem(this.userPrefix + key, value);
    }

    removeItem(key) {
        localStorage.removeItem(this.userPrefix + key);
    }

    // Migration method to move existing data to user-specific storage
    migrateExistingData() {
        const oldKeys = ['freelanceOrders', 'freelanceEmployers', 'freelanceCollapsedSections'];
        
        oldKeys.forEach(key => {
            const existingData = localStorage.getItem(key);
            if (existingData) {
                this.setItem(key.replace('freelance', ''), existingData);
                // Don't remove old data immediately to allow for rollback if needed
            }
        });
    }
}

// Enhanced FreelanceTracker with Authentication
class AuthenticatedFreelanceTracker extends FreelanceTracker {
    constructor() {
        // Initialize auth manager first
        this.authManager = new AuthManager();
        
        // Only proceed if user is authenticated
        if (!this.authManager.getCurrentUser()) {
            return; // Will redirect to login
        }
        
        // Initialize user-specific data manager
        this.userDataManager = new UserDataManager(this.authManager.getCurrentUser().id);
        this.userDataManager.migrateExistingData();
        
        // Call parent constructor
        super();
        
        // Add user-specific customizations
        this.setupUserInterface();
    }

    setupUserInterface() {
        // Add user menu styles
        this.addUserMenuStyles();
        
        // Customize the tracker for the specific user
        this.personalizeInterface();
    }

    addUserMenuStyles() {
        const styles = `
            <style>
                .user-menu {
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: white;
                    border-radius: 12px;
                    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
                    padding: 15px;
                    display: flex;
                    align-items: center;
                    gap: 15px;
                    z-index: 999;
                    min-width: 280px;
                }

                .user-avatar {
                    font-size: 2.5rem;
                    color: #667eea;
                }

                .user-info {
                    flex: 1;
                }

                .user-name {
                    font-weight: 600;
                    color: #2d3748;
                    font-size: 1rem;
                    margin-bottom: 2px;
                }

                .user-email {
                    color: #718096;
                    font-size: 0.85rem;
                }

                .btn-logout {
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    color: white;
                    border: none;
                    padding: 8px 16px;
                    border-radius: 8px;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    font-size: 0.9rem;
                }

                .btn-logout:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
                }

                @media (max-width: 768px) {
                    .user-menu {
                        top: 10px;
                        right: 10px;
                        left: 10px;
                        min-width: auto;
                        padding: 12px;
                    }
                    
                    .user-avatar {
                        font-size: 2rem;
                    }
                    
                    .user-name {
                        font-size: 0.9rem;
                    }
                    
                    .user-email {
                        font-size: 0.8rem;
                    }
                }
            </style>
        `;
        
        document.head.insertAdjacentHTML('beforeend', styles);
    }

    personalizeInterface() {
        const user = this.authManager.getCurrentUser();
        
        // Update page title
        document.title = `FreeLance Pro - ${user.firstName}'s Dashboard`;
        
        // Add personal greeting to the main header if it exists
        const mainHeader = document.querySelector('h1');
        if (mainHeader && mainHeader.textContent.includes('FreeLance')) {
            mainHeader.innerHTML = `Welcome, ${user.firstName}! <span style="font-weight: 300; color: #718096;">FreeLance Pro Dashboard</span>`;
        }
    }

    // Override data loading/saving methods to use user-specific storage
    loadOrders() {
        try {
            const savedOrders = this.userDataManager.getItem('orders');
            return savedOrders ? JSON.parse(savedOrders) : [];
        } catch (error) {
            console.error('Error loading user orders:', error);
            return [];
        }
    }

    saveOrders() {
        try {
            this.userDataManager.setItem('orders', JSON.stringify(this.orders));
        } catch (error) {
            console.error('Error saving user orders:', error);
        }
    }

    loadEmployers() {
        try {
            const savedEmployers = this.userDataManager.getItem('employers');
            return savedEmployers ? JSON.parse(savedEmployers) : ['Joe Mac', 'Brian Oyaro'];
        } catch (error) {
            console.error('Error loading user employers:', error);
            return ['Joe Mac', 'Brian Oyaro'];
        }
    }

    saveEmployers() {
        try {
            this.userDataManager.setItem('employers', JSON.stringify(this.employers));
        } catch (error) {
            console.error('Error saving user employers:', error);
        }
    }

    loadCollapsedSections() {
        try {
            const collapsed = this.userDataManager.getItem('collapsedSections');
            return collapsed ? JSON.parse(collapsed) : {};
        } catch (error) {
            console.error('Error loading collapsed sections:', error);
            return {};
        }
    }

    saveCollapsedSections() {
        try {
            this.userDataManager.setItem('collapsedSections', JSON.stringify(this.collapsedSections));
        } catch (error) {
            console.error('Error saving collapsed sections:', error);
        }
    }

    // Enhanced backup with user info
    backupData() {
        const user = this.authManager.getCurrentUser();
        const backup = {
            user: {
                firstName: user.firstName,
                lastName: user.lastName,
                email: user.email
            },
            orders: this.orders,
            employers: this.employers,
            collapsedSections: this.collapsedSections,
            exportDate: new Date().toISOString(),
            version: '2.0'
        };
        
        const dataStr = JSON.stringify(backup, null, 2);
        const dataBlob = new Blob([dataStr], {type: 'application/json'});
        const url = URL.createObjectURL(dataBlob);
        const link = document.createElement('a');
        link.href = url;
        link.download = `freelance-backup-${user.firstName}-${new Date().toISOString().split('T')[0]}.json`;
        link.click();
        URL.revokeObjectURL(url);
        
        this.showNotification('Backup created successfully!', 'success');
    }

    // Enhanced restore with user verification
    restoreFromFile() {
        const input = document.createElement('input');
        input.type = 'file';
        input.accept = '.json';
        input.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    try {
                        const backup = JSON.parse(e.target.result);
                        
                        if (!backup.orders || !backup.employers) {
                            throw new Error('Invalid backup file format');
                        }
                        
                        // Show restore confirmation with backup info
                        const currentUser = this.authManager.getCurrentUser();
                        const backupInfo = backup.user ? 
                            `${backup.user.firstName} ${backup.user.lastName} (${backup.user.email})` : 
                            'Unknown user';
                        
                        const confirmMessage = `Restore data from backup?\n\nBackup from: ${backupInfo}\nDate: ${new Date(backup.exportDate).toLocaleDateString()}\n\nThis will replace all current data.`;
                        
                        if (confirm(confirmMessage)) {
                            this.orders = backup.orders;
                            this.employers = backup.employers;
                            this.collapsedSections = backup.collapsedSections || {};
                            
                            this.saveOrders();
                            this.saveEmployers();
                            this.saveCollapsedSections();
                            
                            this.updateFinancialOverview();
                            this.updateFinancialSummary();
                            this.renderOrders();
                            
                            this.showNotification('Data restored successfully!', 'success');
                        }
                    } catch (error) {
                        console.error('Restore error:', error);
                        this.showNotification('Error restoring backup file', 'error');
                    }
                };
                reader.readAsText(file);
            }
        });
        input.click();
    }

    // Enhanced clear data with user confirmation
    clearAllData() {
        const user = this.authManager.getCurrentUser();
        const confirmMessage = `${user.firstName}, are you sure you want to delete ALL your orders and employers?\n\nThis action cannot be undone!\n\nType "DELETE" to confirm:`;
        
        const confirmation = prompt(confirmMessage);
        if (confirmation === 'DELETE') {
            this.orders = [];
            this.employers = ['Joe Mac', 'Brian Oyaro'];
            this.collapsedSections = {};
            
            this.saveOrders();
            this.saveEmployers();
            this.saveCollapsedSections();
            
            this.updateFinancialOverview();
            this.updateFinancialSummary();
            this.renderOrders();
            
            this.showNotification('All data cleared!', 'success');
        } else if (confirmation !== null) {
            this.showNotification('Data not cleared - confirmation failed', 'warning');
        }
    }
}

// Initialize the authenticated tracker
let tracker;
document.addEventListener('DOMContentLoaded', () => {
    // Replace the original FreelanceTracker initialization with authenticated version
    tracker = new AuthenticatedFreelanceTracker();
    
    // Only add sample data if no existing user data and user is authenticated
    if (tracker && tracker.orders.length === 0 && !tracker.userDataManager.getItem('orders')) {
        const user = tracker.authManager.getCurrentUser();
        
        // Personalized sample data
        const sampleOrders = [
            {
                id: '1',
                category: 'writers-admin',
                employerName: '',
                title: `Welcome ${user.firstName} - Sample Research Paper`,
                dateAssigned: new Date().toISOString().split('T')[0],
                pages: 5,
                amount: 2500,
                status: 'completed',
                dateCreated: new Date().toISOString(),
                payment: {
                    isPaid: true,
                    datePaid: new Date().toISOString().split('T')[0],
                    expenseCategory: 'savings',
                    notes: 'Sample completed order'
                }
            },
            {
                id: '2',
                category: 'employer',
                employerName: 'Joe Mac',
                title: 'Getting Started - Website Content',
                dateAssigned: new Date().toISOString().split('T')[0],
                pages: 3,
                amount: 1500,
                status: 'active',
                dateCreated: new Date().toISOString(),
                payment: {
                    isPaid: false,
                    datePaid: null,
                    expenseCategory: null,
                    notes: null
                }
            }
        ];
        
        tracker.orders = sampleOrders;
        tracker.saveOrders();
        tracker.updateFinancialOverview();
        tracker.updateFinancialSummary();
        tracker.renderOrders();
        
        // Show welcome message for new users
        setTimeout(() => {
            tracker.showNotification(
                `Welcome to FreeLance Pro, ${user.firstName}! We've added some sample data to get you started.`, 
                'success'
            );
        }, 2000);
    }

    // Add event listeners for existing buttons if they exist
    const analyzeBtn = document.getElementById('analyzeFinanceBtn');
    if (analyzeBtn) {
        analyzeBtn.addEventListener('click', function() {
            if (tracker) tracker.analyzeFinances();
        });
    }
});
</script>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Freelance Work Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="button.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <h1><i class="fas fa-chart-line"></i> Freelance Tracker</h1>
                <div class="header-stats">
                    <div class="stat-card">
                        <i class="fas fa-clock"></i>
                        <span id="currentMonth"></span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Financial Overview -->
        
        <div id="financialSummaryContainer" class="financial-summary-section"></div>
        <div id="paymentModal" class="modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>Payment Details</h2>
        <p>For: <span id="paymentOrderTitle"></span></p>
        
        <form id="paymentForm">
            <div class="form-group">
                <label>
                    <input type="checkbox" id="isPaid" name="isPaid">
                    <span id="paidStatusText">Unpaid</span>
                </label>
            </div>
            
            <div id="paymentDetails" style="display: none;">
                <div class="form-group">
                    <label for="datePaid">Date Paid</label>
                    <input type="date" id="datePaid" name="datePaid">
                </div>
                
                <div class="form-group">
                    <label for="expenseCategory">Category</label>
                    <select id="expenseCategory" name="expenseCategory" required>
                        <option value="">Select category</option>
                        <option value="savings">Savings</option>
                        <option value="rent">Rent</option>
                        <option value="wifi">Wifi</option>
                        <option value="utilities">Utilities</option>
                        <option value="shopping">Shopping</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="paymentNotes">Notes</label>
                    <textarea id="paymentNotes" name="paymentNotes" rows="3"></textarea>
                </div>
                
                <button type="submit" class="btn">Save Payment</button>
            </div>
        </form>
    </div>
</div>
<section class="financial-overview">
            <div class="overview-grid">
                <div class="overview-card active-orders">
                    <div class="card-icon">
                        <i class="fas fa-play-circle"></i>
                    </div>
                    <div class="card-content">
                        <h3>Active Orders</h3>
                        <p class="amount" id="activeTotal">KSh 0</p>
                    </div>
                </div>
                
                <div class="overview-card submitted-orders">
                    <div class="card-icon">
                        <i class="fas fa-paper-plane"></i>
                    </div>
                    <div class="card-content">
                        <h3>Submitted Orders</h3>
                        <p class="amount" id="submittedTotal">KSh 0</p>
                    </div>
                </div>
                
                <div class="overview-card completed-orders">
                    <div class="card-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="card-content">
                        <h3>Completed Orders</h3>
                        <p class="amount" id="completedTotal">KSh 0</p>
                    </div>
                </div>
                
                <div class="overview-card savings-goal">
                    <div class="card-icon">
                        <i class="fas fa-piggy-bank"></i>
                    </div>
                    <div class="card-content">
                        <h3>Target Income</h3>
                        <p class="amount" id="targetIncome">KSh 28,500</p>
                        <small>Monthly expenses + KSh 10,000 savings</small>
                    </div>
                </div>
            </div>
            
            <!-- Progress Bar -->
            <div class="progress-section">
                <div class="progress-info">
                    <span class="progress-label">Monthly Progress</span>
                    <span class="progress-percentage" id="progressPercentage">0%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="remaining-amount">
                    <span>Remaining to goal: <strong id="remainingAmount">KSh 28,500</strong></span>
                </div>
            </div>
            <button id="analyzeFinanceBtn" class="btn">
    <i class="fas fa-calculator"></i> Analyze Finances
</button>
        </section>
        <!-- Add Order Form -->
        <section class="add-order-section">
            <div class="section-header">
                <h2><i class="fas fa-plus-circle"></i> Add New Order</h2>
                <button class="toggle-form-btn" id="toggleFormBtn">
                    <i class="fas fa-chevron-down"></i>
                </button>
            </div>
            
            <form class="add-order-form" id="addOrderForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="workCategory">Work Category</label>
                        <select id="workCategory" required>
                            <option value="">Select Category</option>
                            <option value="writers-admin">Writers Admin</option>
                            <option value="employer">Employer</option>
                            <option value="others">Others</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="employerNameGroup" style="display: none;">
                        <label for="employerName">Employer Name</label>
                        <div style="display: flex; gap: 10px;">
                            <select id="employerSelect" onchange="document.getElementById('employerName').value = this.value">
                                <option value="">Select Existing</option>
                                <!-- Dynamically populated -->
                            </select>
                            <input type="text" id="employerName" placeholder="Or enter new employer">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="orderTitle">Order Title</label>
                        <input type="text" id="orderTitle" required placeholder="Enter order title">
                    </div>
                    
                    <div class="form-group">
                        <label for="dateAssigned">Date Assigned</label>
                        <input type="date" id="dateAssigned" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="numPages">Number of Pages</label>
                        <input type="number" id="numPages" required min="1" placeholder="Enter number of pages">
                    </div>
                    
                    <div class="form-group">
                        <label for="valueAmount">Value Amount (KSh)</label>
                        <input type="number" id="valueAmount" required min="0" step="0.01" placeholder="Enter amount">
                    </div>
                </div>
                
                <button type="submit" class="submit-btn">
                    <i class="fas fa-plus"></i> Add Order
                </button>
            </form>
        </section>

        <!-- Orders List -->
        <section class="orders-section">
            <div class="section-header">
                <h2><i class="fas fa-list"></i> Orders</h2>
                <div class="header-controls">
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="active">Active</button>
                        <button class="filter-btn" data-filter="submitted">Submitted</button>
                        <button class="filter-btn" data-filter="completed">Completed</button>
                    </div>
                    <div class="data-controls">
                        <button class="control-btn backup-btn" onclick="tracker.backupData()" title="Backup Data">
                            <i class="fas fa-download"></i>
                        </button>
                        <button class="control-btn restore-btn" onclick="tracker.restoreFromFile()" title="Restore Data">
                            <i class="fas fa-upload"></i>
                        </button>
                        <button class="control-btn clear-btn" onclick="tracker.clearAllData()" title="Clear All Data">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="orders-container" id="ordersContainer">
                <div class="empty-state" id="emptyState">
                    <i class="fas fa-inbox"></i>
                    <h3>No orders yet</h3>
                    <p>Add your first order to get started tracking your work!</p>
                </div>
            </div>
        </section>
        
        <div id="paymentModal" class="modal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h3>Record Payment for <span id="paymentOrderTitle"></span></h3>
        <form id="paymentForm">
            <div class="form-group">
                <label>Payment Status</label>
                <div class="toggle-switch">
                    <input type="checkbox" id="isPaid">
                    <label for="isPaid" class="toggle-label">
                        <span class="toggle-handle"></span>
                    </label>
                    <span id="paidStatusText">Unpaid</span>
                </div>
            </div>
            
            <div id="paymentDetails" style="display: none;">
                <div class="form-group">
                    <label for="datePaid">Date Paid</label>
                    <input type="date" id="datePaid" required>
                </div>
                
                <div class="form-group">
                    <label for="expenseCategory">Used For</label>
                    <select id="expenseCategory" required>
                        <option value="">Select category</option>
                        <option value="savings">Savings</option>
                        <option value="rent">Rent</option>
                        <option value="wifi">WiFi</option>
                        <option value="utilities">Utilities</option>
                        <option value="shopping">Shopping</option>
                        <option value="investment">Investment</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="paymentNotes">Notes</label>
                    <textarea id="paymentNotes" rows="3" placeholder="Additional details"></textarea>
                </div>
            </div>
            
            <button type="submit" class="submit-btn">
                Save Payment Details
            </button>
        </form>
    </div>
</div>
<div id="titheOverview"></div>
        <!-- Monthly Expenses Breakdown -->
        <section class="expenses-section">
            <div class="section-header">
                <h2><i class="fas fa-receipt"></i> Monthly Expenses</h2>
            </div>
            
            <div class="expenses-grid">
                <div class="expense-item">
                    <div class="expense-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <div class="expense-details">
                        <span class="expense-name">Rent</span>
                        <span class="expense-amount">KSh 11,000</span>
                    </div>
                </div>
                
                <div class="expense-item">
                    <div class="expense-icon">
                        <i class="fas fa-wifi"></i>
                    </div>
                    <div class="expense-details">
                        <span class="expense-name">WiFi</span>
                        <span class="expense-amount">KSh 2,000</span>
                    </div>
                </div>
                
                <div class="expense-item">
                    <div class="expense-icon">
                        <i class="fas fa-tint"></i>
                    </div>
                    <div class="expense-details">
                        <span class="expense-name">Water & Garbage</span>
                        <span class="expense-amount">KSh 500</span>
                    </div>
                </div>
                
                <div class="expense-item">
                    <div class="expense-icon">
                        <i class="fas fa-shopping-cart"></i>
                    </div>
                    <div class="expense-details">
                        <span class="expense-name">Shopping</span>
                        <span class="expense-amount">KSh 5,000</span>
                    </div>
                </div>
                
                <div class="expense-item total">
                    <div class="expense-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <div class="expense-details">
                        <span class="expense-name">Total Expenses</span>
                        <span class="expense-amount">KSh 18,500</span>
                    </div>
                </div>
            </div>
        </section>
        
        
    </div>
    <footer class="footer">
    <div class="footer-content">
        <div class="footer-left">
            <p>Designed and developed by <a href="https://www.absolomondara.co.ke/" target="_blank">Absolom Ondara</a></p>
        </div>
        <div class="footer-right">
            <p>Courtesy of <a href="https://www.worldwaysweb-developers.co.ke/" target="_blank">Worldways Web-Developers</a></p>
            <a href="https://wa.me/254112293409" class="whatsapp-btn" target="_blank">
                <i class="fab fa-whatsapp"></i>Support
            </a>
        </div>
    </div>
</footer>

    <script src="script.js"></script>
    <script src="tithe.js"></script>
</body>
</html>